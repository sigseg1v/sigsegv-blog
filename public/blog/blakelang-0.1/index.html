<!doctype html><html lang=en class=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>The blakelang programming language | Max Verigin</title>
<meta name=description content="Software Developer & Photographer"><link rel=stylesheet href=/css/tailwind.css><link rel=stylesheet href=/css/style.css></head><body class="bg-gray-900 text-gray-100 min-h-screen"><div class="container mx-auto px-4 py-8 max-w-4xl"><header class=mb-12><nav class="flex items-center justify-between py-6 border-b border-gray-800"><a href=/ class="text-xl font-bold hover:text-gray-300 transition-colors">Max Verigin</a><div class="flex items-center gap-8"><ul class="flex space-x-8"><li><a href=/ class="hover:text-gray-300 transition-colors underline-animation">Home</a></li><li><a href=/experience/ class="hover:text-gray-300 transition-colors underline-animation">Experience</a></li><li><a href=/photography/ class="hover:text-gray-300 transition-colors underline-animation">Photography</a></li><li><a href=/blog/ class="hover:text-gray-300 transition-colors underline-animation">Blog</a></li></ul><a href=https://github.com/sigseg1v target=_blank rel="noopener noreferrer" class="hover:text-gray-300 transition-colors" aria-label=GitHub><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483.0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951.0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65.0.0.84-.27 2.75 1.026A9.564 9.564.0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688.0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855.0 1.338-.012 2.419-.012 2.747.0.268.18.58.688.482A10.019 10.019.0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg>
</a><a href=mailto:max.verigin@gmail.com class="hover:text-gray-300 transition-colors" aria-label=Email><svg class="w-6 h-6" fill="none" stroke="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22.0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v10a2 2 0 002 2z"/></svg></a></div></nav></header></div><main><div class="container mx-auto px-4 max-w-4xl"><article class="prose prose-invert prose-lg max-w-none"><h1>The blakelang programming language</h1><p class="text-gray-500 text-sm">December 31, 2025</p><div class=mt-8><h2 id=why>Why</h2><p>C# is probably my favourite programming language. It strikes just the right balance of &ldquo;batteries-included&rdquo; (via a great standard library, performant GC) versus &ldquo;just let me do it&rdquo; (unsafe, stackalloc, P/Invoke).</p><p>But can it be better?</p><p>After over a decade of writing C# there are still some things I was wishing it had.</p><p>When we write a function like this, the compiler should already know that the result is a <code>IQueryable&lt;UserData></code> because that&rsquo;s what&rsquo;s being returned, yet we still must write:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>    IQueryable&lt;UserData&gt; GetUserData(Guid id)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> _ctx.Query&lt;UserData&gt;().Where(x =&gt; x.Id == id);
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>Or if you wanted a nice public API that lists a dynamic set of commands but provides good editor auto-completion, you may want something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>    <span style=color:#66d9ef>public</span> MyApp.CreateUserCommand CreateUserCommand { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> MyApp.DeleteUserCommand DeleteUserCommand { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> MyApp.UpdateUserCommand UpdateUserCommand { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span></code></pre></div><p>However in C# the best way to write that is manually, or accept a compromise such as a dictionary where you can look them up, maybe via a well known list of command strings.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IDictionary&lt;<span style=color:#66d9ef>string</span>, MyApp.ICommand&gt; Commands { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span></code></pre></div><p>However, that won&rsquo;t provide a good experience because all the return types are a shared interface like <code>ICommand</code> and as a consumer of that class, if you access it with <code>Commands["CreateUser"]</code> you can&rsquo;t automatically see the docs inline in the editor for what the <code>CreateUserCommand</code> does, for example.</p><h2 id=what>What</h2><p>I was interested in finding solutions to challenges like this and went down the rabbit hole of learning about Roslyn Source Generators. In short, it&rsquo;s a system where you can register a project as an &ldquo;analyzer&rdquo; and dotnet will call it at compile time, giving you the ability to do things with the AST representation of your code.</p><p>This allows <strong>metaprogramming</strong> which just means that the code is data to your source generator and you can write additional code to modify the input code.</p><p>Most uses I&rsquo;ve found of source generators are generating boilerplate. An example is protobuf, which takes proto contract files and generates C# files that match the fields contained within. So the logic is mostly defined as the rules of protobuf being applied to that file.</p><p>However I wanted to try to abstract things one level further. Source code files contain code that runs at runtime. But what if we indicate different sections in the code to have a section that runs at runtime and a section that runs at compile-time. The compile-time code could then be used as metaprogramming to generate more source code, but instead of predefined rules or transforms.</p><p>That&rsquo;s essentially the primary feaure of what I&rsquo;m calling <code>blakelang</code> - a compile-time metaprogrammming language which transpiles to C#.</p><p>In <code>blakelang</code>, all valid <code>.cs</code> files are valid <code>.blake</code> files, so we start with the full power of C#.</p><p>On top we add:</p><ul><li><code>@{|</code> and <code>|}</code> to delimit compile-time evaluated sections of the code. When compiled, these blocks will be removed from the resulting <code>.cs</code> file. They simply run C# statements at compile-time and go away.</li><li><code>`</code> to delimit output code from within a <code>@{|</code> block. This is how you can start to build more useful things with the compile-time statements, because now any time they have such a statement, including within a loop, it will add code to the resulting <code>.cs</code> file</li><li><code>@(</code> and <code>)</code> to delimit variable expansion, so you can output expressions from the compile-time code to the transpiled source</li><li>some other nice-to-haves such as <code>var</code> to infer return types on a method</li></ul><h2 id=examples>Examples</h2><h3 id=compile-time-ast-traversal-to-find-types-implementing-an-interface>Compile-time AST traversal to find types implementing an interface</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Command.blake</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>{|
</span></span><span style=display:flex><span><span style=color:#75715e>// reflects upon compilation AST to find things with interface `MyApp.ICommand`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> commands = Blake.FindTypesImplementing(<span style=color:#e6db74>&#34;MyApp.ICommand&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> cmd <span style=color:#66d9ef>in</span> commands)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>`</span><span style=color:#66d9ef>public</span> <span style=color:#960050;background-color:#1e0010>@</span>(cmd.ToDisplayString()) <span style=color:#960050;background-color:#1e0010>@</span>(cmd.Name) { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }<span style=color:#960050;background-color:#1e0010>`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>|}
</span></span></code></pre></div><p>Produces the following generated output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Command.g.cs</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// &lt;auto-generated&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> MyApp.CreateUserCommand CreateUserCommand { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> MyApp.DeleteUserCommand DeleteUserCommand { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> MyApp.UpdateUserCommand UpdateUserCommand { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span></code></pre></div><h3 id=compile-time-generation-of-c-properties>Compile-time generation of C# properties</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// User.blake</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> MyApp.Models;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Id { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>{|
</span></span><span style=display:flex><span>    <span style=color:#75715e>// This C# code runs at compile time</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> fields = <span style=color:#66d9ef>new</span>[]
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;FirstName&#34;</span>, <span style=color:#e6db74>&#34;string&#34;</span>),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;LastName&#34;</span>, <span style=color:#e6db74>&#34;string&#34;</span>),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Email&#34;</span>, <span style=color:#e6db74>&#34;string&#34;</span>),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Age&#34;</span>, <span style=color:#e6db74>&#34;int?&#34;</span>),
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> (name, type) <span style=color:#66d9ef>in</span> fields)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Backtick strings are output - they emit to the generated file</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// @(expr) splices in the compile-time value</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>`</span>   <span style=color:#66d9ef>public</span> <span style=color:#960050;background-color:#1e0010>@</span>(type) <span style=color:#960050;background-color:#1e0010>@</span>(name) { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }<span style=color:#960050;background-color:#1e0010>`</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>|}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Produces the following generated output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// User.g.cs</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// &lt;auto-generated&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> MyApp.Models;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Id { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> FirstName { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> LastName { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Email { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int?</span> Age { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=inferred-method-return-values>Inferred method return values</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Person.blake</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>var</span> GetName() { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Bob&#34;</span>; }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Produces the following generated output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// Person.g.cs</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// &lt;auto-generated&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> GetName() { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Bob&#34;</span>; }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=how>How</h2><p>There&rsquo;s a summary here in the <a href=https://github.com/sigseg1v/blakelang/blob/main/README.md#how-it-works target=_blank rel="noopener noreferrer">README</a></p><p>The source for the language, grammar, source generator and editor plugins is <a href=https://github.com/sigseg1v/blakelang target=_blank rel="noopener noreferrer">here on github</a>
!</p></div></article></div></main><div class="container mx-auto px-4 py-8 max-w-4xl"><footer class="mt-16 text-center text-gray-500 text-sm"><p>&copy; 2026 Max Verigin</p></footer></div></body></html>